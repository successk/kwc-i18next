<link rel="import" href="../polymer/polymer.html"><dom-module id="kwc-i18next"><template></template><script>"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){this.is="kwc-i18next",this.properties={key:{type:String,value:null,observer:"_update"},show:{type:Boolean,value:!1},"var":{type:String,value:null,readOnly:!0,reflectToAttribute:!0,notify:!0,observer:"_updateDom"},notEscape:{type:Boolean,value:!1,observer:"_update"}}}},{key:"attached",value:function(){var e=this;this._isAttached=!0,this._update(),window.i18next.on("initialized",function(){return e._update()}),window.i18next.on("loaded",function(){return e._update()}),window.i18next.on("languageChanged",function(){return e._update()}),new MutationObserver(function(t){t.forEach(function(t){"attributes"===t.type&&e._update()})}).observe(this,{attributes:!0})}},{key:"_update",value:function(){if(this._isAttached){var e=this._getOptions();this._setVar(window.i18next.t(this.key,e))}}},{key:"_getOptions",value:function(){var e=this._getParameters();return this.notEscape&&(e.interpolation={escape:!1}),e}},{key:"_getParameters",value:function(){var e={};return Array.from(this.attributes).filter(function(e){return e.name.startsWith("p-")}).forEach(function(t){var n=void 0;try{n=JSON.parse(t.value)}catch(a){n=t.value}e[t.name.substr(2)]=n}),e}},{key:"_updateDom",value:function(e){this.show&&(this.innerHTML=e)}}]),e}();Polymer(e)}();</script></dom-module>